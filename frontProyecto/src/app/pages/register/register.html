<div class="login-container">
  <div class="login-left">
    <div class="left-content">
      <img src="/assets/loginImagenn.png" alt="Imagen decorativa" class="left-illustration" />
      <h1 class="welcome">
        Bienvenido al Sistema de <br />
        Gestión de Procesos
      </h1>
    </div>
  </div>

  <div class="login-right">
    <div class="login-box">
      <img src="/assets/logo.png" alt="Logo" class="logo" />
      <h2>Crear cuenta</h2>

      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
        <!-- Selector de rol -->
        <label>Tipo de usuario</label>
        <div class="seg-group" role="group" aria-label="Tipo de usuario">
          <button type="button" class="seg-btn"
                  [class.active]="c['role'].value === 'empleado'"
                  (click)="setRole('empleado')">
            Empleado
          </button>
          <button type="button" class="seg-btn"
                  [class.active]="c['role'].value === 'administrador'"
                  (click)="setRole('administrador')">
            Administrador
          </button>
        </div>

        <!-- Campos para Administrador -->
        <ng-container *ngIf="c['role'].value === 'administrador'">
          <label for="empresaNombre">Nombre de la empresa</label>
          <input id="empresaNombre" type="text" formControlName="nombre" placeholder="Mi Empresa S.A.S" />
          <small *ngIf="c['nombre'].touched && c['nombre'].invalid">Requerido (mín. 2 caracteres)</small>

          <label for="nit">NIT</label>
          <input id="nit" type="text" formControlName="nit" placeholder="900123456-5" />
          <small *ngIf="c['nit'].touched && c['nit'].invalid">Requerido</small>

          <label for="correoContacto">Correo de contacto</label>
          <input id="correoContacto" type="email" formControlName="correoContacto" placeholder="contacto@empresa.com" />
          <small *ngIf="c['correoContacto'].touched && c['correoContacto'].invalid">Correo inválido</small>

          <label for="empresaPassword">Contraseña</label>
          <input id="empresaPassword" type="password" formControlName="empresaPassword" placeholder="••••••••" />
          <small *ngIf="c['empresaPassword'].touched && c['empresaPassword'].invalid">Requerido</small>
        </ng-container>

        <!-- Campos para Empleado -->
        <ng-container *ngIf="c['role'].value === 'empleado'">
          <label for="userNombre">Nombre</label>
          <input id="userNombre" type="text" formControlName="userNombre" placeholder="Tu nombre" />

          <label for="email">Correo electrónico</label>
          <input id="email" type="email" formControlName="email" placeholder="email@dominio.com" />

          <label for="rol">Rol</label>
          <select formControlName="rol" id="rol">
            <option value="LECTOR">Lector</option>
            <option value="EDITOR">Editor</option>
            <option value="ADMIN">Administrador</option>
          </select>

          <label for="password">Contraseña</label>
          <input id="password" type="password" formControlName="password" placeholder="••••••••" />

          <label for="empresaId">ID de empresa</label>
          <input id="empresaId" type="number" formControlName="empresaId" placeholder="Ej: 3" />
        </ng-container>

        <button class="btn-primary" type="submit" [disabled]="loading">
          {{ loading ? 'Creando...' : 'Registrarme' }}
        </button>
      </form>

      <p class="register">
        ¿Ya tienes cuenta?
        <a routerLink="/login">Iniciar sesión</a>
      </p>
    </div>
  </div>
</div>
